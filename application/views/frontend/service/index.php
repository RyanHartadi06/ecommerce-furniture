<!-- Services Section -->
<div class="section bg_gray small_pt small_pb">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="heading_s1 text-center">
                    <h2>Layanan Kami</h2>
                    <p class="lead">Pengalaman berbelanja furniture terbaik dengan layanan berkualitas tinggi</p>
                </div>
            </div>
        </div>
        <div class="row g-4">
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="icon_box icon_box_style2 text-center h-100">
                    <div class="icon mb-3">
                        <i class="flaticon-shipped text-primary" style="font-size: 3rem;"></i>
                    </div>
                    <div class="icon_box_content">
                        <h5 class="mb-3">Pengiriman Gratis</h5>
                        <p class="text-muted">Gratis ongkos kirim untuk pembelian minimal Rp 2.000.000</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="icon_box icon_box_style2 text-center h-100">
                    <div class="icon mb-3">
                        <i class="flaticon-money-back text-success" style="font-size: 3rem;"></i>
                    </div>
                    <div class="icon_box_content">
                        <h5 class="mb-3">Garansi 30 Hari</h5>
                        <p class="text-muted">Jaminan uang kembali 100% dalam 30 hari jika tidak puas</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="icon_box icon_box_style2 text-center h-100">
                    <div class="icon mb-3">
                        <i class="flaticon-support text-info" style="font-size: 3rem;"></i>
                    </div>
                    <div class="icon_box_content">
                        <h5 class="mb-3">Customer Support 24/7</h5>
                        <p class="text-muted">Tim support siap membantu Anda kapan saja via chat atau telepon</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="icon_box icon_box_style2 text-center h-100">
                    <div class="icon mb-3">
                        <i class="flaticon-payment-security text-warning" style="font-size: 3rem;"></i>
                    </div>
                    <div class="icon_box_content">
                        <h5 class="mb-3">Pembayaran Aman</h5>
                        <p class="text-muted">Sistem pembayaran yang aman dengan berbagai metode pilihan</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Additional Services Section -->
<div class="section small_pt small_pb">
    <div class="container">
        <div class="row justify-content-center mb-5">
            <div class="col-md-8">
                <div class="heading_s1 text-center">
                    <h2>Keunggulan Belanja di Toko Kami</h2>
                    <p class="lead text-muted">Komitmen kami untuk memberikan pengalaman terbaik</p>
                </div>
            </div>
        </div>
        <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
                <div class="about_img position-relative">
                    <img src="<?= base_url('assets/frontend/images/about_img.jpg') ?>" alt="furniture services" class="img-fluid rounded shadow">
                    <div class="about_overlay position-absolute" style="top: 20px; left: 20px; background: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px;">
                        <h6 class="mb-0"><i class="fas fa-award text-warning me-2"></i>Kualitas Terjamin</h6>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="pr_content">
                    <h3 class="mb-4">Mengapa Memilih Kami?</h3>
                    <p class="lead mb-4">Kami berkomitmen memberikan pengalaman berbelanja furniture terbaik dengan kualitas produk premium dan layanan memuaskan.</p>
                    <div class="row">
                        <div class="col-md-6">
                            <ul class="list_none pr_list">
                                <li class="mb-3"><i class="ti-check text-success me-2"></i> Furniture berkualitas tinggi dari brand terpercaya</li>
                                <li class="mb-3"><i class="ti-check text-success me-2"></i> Konsultasi gratis dengan interior designer</li>
                                <li class="mb-3"><i class="ti-check text-success me-2"></i> Pemasangan dan instalasi profesional</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <ul class="list_none pr_list">
                                <li class="mb-3"><i class="ti-check text-success me-2"></i> Layanan after-sales dan maintenance</li>
                                <li class="mb-3"><i class="ti-check text-success me-2"></i> Cicilan 0% untuk pembelian tertentu</li>
                                <li class="mb-3"><i class="ti-check text-success me-2"></i> Showroom luas dengan display lengkap</li>
                            </ul>
                        </div>
                    </div>
                    <a href="<?= site_url('tentang-kami') ?>" class="btn btn-fill-out btn-lg mt-3">
                        <i class="fas fa-arrow-right me-2"></i>Pelajari Lebih Lanjut
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Damage Property/Furniture Repair Section -->
<div class="section bg_light_gray">
    <div class="container">
        <div class="row justify-content-center mb-5">
            <div class="col-md-10">
                <div class="heading_s1 text-center">
                    <h2 class="mb-3">Layanan Perbaikan & Klaim Kerusakan</h2>
                    <p class="lead">Furniture rusak? Tenang! Kami menyediakan layanan perbaikan dan klaim garansi untuk berbagai jenis kerusakan</p>
                </div>
            </div>
        </div>

        <div class="row g-4 mb-5">
            <div class="col-lg-4 col-md-6">
                <div class="damage_card h-100">
                    <div class="damage_icon text-center mb-4">
                        <div class="icon-wrapper mb-3">
                            <i class="fas fa-tools fa-3x text-danger"></i>
                        </div>
                        <h5 class="card-title">Kerusakan Struktural</h5>
                        <p class="text-muted">Perbaikan rangka patah, sambungan longgar, atau kerusakan struktural lainnya</p>
                    </div>
                    <div class="damage_content">
                        <ul class="damage_list">
                            <li><i class="fas fa-check-circle text-success me-2"></i>Rangka kursi/meja patah</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i>Sambungan kayu longgar</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i>Kaki furniture goyang</li>
                        </ul>
                        <div class="text-center mt-4">
                            <span class="damage_time">
                                <i class="fas fa-clock me-2"></i>Estimasi: 3-7 hari
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="damage_card h-100">
                    <div class="damage_icon text-center mb-4">
                        <div class="icon-wrapper mb-3">
                            <i class="fas fa-paint-brush fa-3x text-warning"></i>
                        </div>
                        <h5 class="card-title">Kerusakan Finishing</h5>
                        <p class="text-muted">Perbaikan cat mengelupas, goresan, atau kerusakan permukaan furniture</p>
                    </div>
                    <div class="damage_content">
                        <ul class="damage_list">
                            <li><i class="fas fa-check-circle text-success me-2"></i>Cat mengelupas/pudar</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i>Goresan permukaan</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i>Noda membandel</li>
                        </ul>
                        <div class="text-center mt-4">
                            <span class="damage_time">
                                <i class="fas fa-clock me-2"></i>Estimasi: 2-5 hari
                            </span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="damage_card h-100">
                    <div class="damage_icon text-center mb-4">
                        <div class="icon-wrapper mb-3">
                            <i class="fas fa-couch fa-3x text-info"></i>
                        </div>
                        <h5 class="card-title">Kerusakan Upholstery</h5>
                        <p class="text-muted">Perbaikan kain sobek, busa kempes, atau kerusakan pelapis furniture</p>
                    </div>
                    <div class="damage_content">
                        <ul class="damage_list">
                            <li><i class="fas fa-check-circle text-success me-2"></i>Kain sofa sobek</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i>Busa kursi kempes</li>
                            <li><i class="fas fa-check-circle text-success me-2"></i>Resleting rusak</li>
                        </ul>
                        <div class="text-center mt-4">
                            <span class="damage_time">
                                <i class="fas fa-clock me-2"></i>Estimasi: 5-10 hari
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Service Order Form -->
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <div class="damage_report_section">
                    <div class="form-header text-center mb-5">
                        <h4 class="mb-3">Form Pemesanan Layanan</h4>
                        <p class="text-muted">Pilih jenis layanan dan isi formulir untuk mendapatkan pelayanan terbaik dari kami</p>
                    </div>

                    <!-- Step 1: Pilih Jenis Layanan -->
                    <div id="step-1" class="form-step">
                        <h5 class="step-title mb-4"><span class="step-number">1</span> Pilih Jenis Layanan</h5>
                        <div class="row g-3">
                            <div class="col-lg-3 col-md-6">
                                <div class="service-card" data-service="jok-motor">
                                    <div class="service-icon">
                                        <i class="fas fa-motorcycle fa-2x text-primary"></i>
                                    </div>
                                    <h6 class="mt-3">Perbaikan Jok Motor</h6>
                                    <p class="text-muted small">Perbaikan dan restorasi jok motor</p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="service-card" data-service="jok-mobil">
                                    <div class="service-icon">
                                        <i class="fas fa-car fa-2x text-success"></i>
                                    </div>
                                    <h6 class="mt-3">Perbaikan Jok Mobil</h6>
                                    <p class="text-muted small">Restorasi dan perbaikan jok mobil</p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="service-card" data-service="kursi-rumah">
                                    <div class="service-icon">
                                        <i class="fas fa-chair fa-2x text-info"></i>
                                    </div>
                                    <h6 class="mt-3">Perbaikan Kursi Rumah Tangga</h6>
                                    <p class="text-muted small">Perbaikan furniture rumah tangga</p>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="service-card" data-service="spring-bed">
                                    <div class="service-icon">
                                        <i class="fas fa-bed fa-2x text-warning"></i>
                                    </div>
                                    <h6 class="mt-3">Perbaikan/Pemesanan Spring Bed</h6>
                                    <p class="text-muted small">Layanan spring bed custom</p>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-fill-out" id="next-step-1" disabled>
                                Lanjutkan <i class="fas fa-arrow-right ms-2"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Step 2: Formulir Pemesanan -->
                    <div id="step-2" class="form-step" style="display: none;">
                        <h5 class="step-title mb-4"><span class="step-number">2</span> Isi Formulir Pemesanan</h5>
                        <form id="service-order-form" class="row g-3">
                            <input type="hidden" id="selected_service" name="selected_service">

                            <!-- Data Pelanggan -->
                            <div class="col-12">
                                <h6 class="form-section-title">Data Pelanggan</h6>
                            </div>
                            <div class="col-lg-6">
                                <label for="customer_name" class="form-label">Nama Lengkap <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="customer_name" name="customer_name" required>
                            </div>
                            <div class="col-lg-6">
                                <label for="phone_number" class="form-label">Nomor Telepon <span class="text-danger">*</span></label>
                                <input type="tel" class="form-control" id="phone_number" name="phone_number" required>
                            </div>
                            <div class="col-12">
                                <label for="address" class="form-label">Alamat Lengkap <span class="text-danger">*</span></label>
                                <textarea class="form-control" id="address" name="address" rows="2" placeholder="Masukkan alamat lengkap..." required></textarea>
                            </div>

                            <!-- Data Barang -->
                            <div class="col-12 mt-4">
                                <h6 class="form-section-title">Data Barang</h6>
                            </div>
                            <div id="vehicle-info" class="col-lg-6" style="display: none;">
                                <label for="vehicle_brand" class="form-label">Merk/Tipe Kendaraan <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="vehicle_brand" name="vehicle_brand" placeholder="Contoh: Honda Beat, Toyota Avanza">
                            </div>
                            <div id="chair-info" class="col-lg-6" style="display: none;">
                                <label for="chair_type" class="form-label">Tipe Kursi <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" id="chair_type" name="chair_type" placeholder="Contoh: Kursi kantor, Sofa 3 dudukan">
                            </div>
                            <div id="bed-info" class="col-lg-6" style="display: none;">
                                <label for="bed_size" class="form-label">Ukuran Spring Bed <span class="text-danger">*</span></label>
                                <select class="form-control" id="bed_size" name="bed_size">
                                    <option value="">Pilih ukuran</option>
                                    <option value="single">Single (90x200 cm)</option>
                                    <option value="super-single">Super Single (120x200 cm)</option>
                                    <option value="double">Double (140x200 cm)</option>
                                    <option value="queen">Queen (160x200 cm)</option>
                                    <option value="king">King (180x200 cm)</option>
                                    <option value="super-king">Super King (200x200 cm)</option>
                                    <option value="custom">Custom Size</option>
                                </select>
                            </div>
                            <div class="col-lg-6">
                                <label for="damage_description" class="form-label">Deskripsi Kerusakan/Kebutuhan <span class="text-danger">*</span></label>
                                <textarea class="form-control" id="damage_description" name="damage_description" rows="3" placeholder="Jelaskan kerusakan atau kebutuhan secara detail..." required></textarea>
                            </div>

                            <!-- Upload Foto -->
                            <div class="col-12">
                                <label for="damage_photos" class="form-label">Upload Foto</label>
                                <input type="file" class="form-control" id="damage_photos" name="damage_photos[]" multiple accept="image/*">
                                <small class="form-text text-muted">Upload foto kondisi saat ini (maksimal 5 foto, format: JPG, PNG)</small>
                            </div>

                            <!-- Kustomisasi -->
                            <div class="col-12 mt-4">
                                <h6 class="form-section-title">Pilihan Kustomisasi</h6>
                            </div>
                            <div class="col-lg-6">
                                <label for="material_type" class="form-label">Pilihan Bahan</label>
                                <select class="form-control" id="material_type" name="material_type">
                                    <option value="">Pilih bahan</option>
                                    <option value="kulit-asli">Kulit Asli</option>
                                    <option value="kulit-sintetis">Kulit Sintetis</option>
                                    <option value="kain-oscar">Kain Oscar</option>
                                    <option value="kain-bludru">Kain Bludru</option>
                                    <option value="original">Sesuai Original</option>
                                </select>
                            </div>
                            <div id="foam-options" class="col-lg-6" style="display: none;">
                                <label for="foam_modification" class="form-label">Modifikasi Busa</label>
                                <select class="form-control" id="foam_modification" name="foam_modification">
                                    <option value="">Pilih modifikasi</option>
                                    <option value="tambah-busa">Tambah Busa (Lebih Empuk)</option>
                                    <option value="kurangi-busa">Kurangi Busa (Lebih Keras)</option>
                                    <option value="ganti-busa">Ganti Busa Baru</option>
                                    <option value="original">Sesuai Original</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label for="shape_modification" class="form-label">Modifikasi Bentuk</label>
                                <textarea class="form-control" id="shape_modification" name="shape_modification" rows="2" placeholder="Jelaskan jika ada modifikasi bentuk yang diinginkan..."></textarea>
                            </div>

                            <div class="text-center mt-4">
                                <button type="button" class="btn btn-outline-secondary me-2" id="back-step-1">
                                    <i class="fas fa-arrow-left me-2"></i>Kembali
                                </button>
                                <button type="button" class="btn btn-fill-out" id="next-step-2">
                                    Lanjutkan <i class="fas fa-arrow-right ms-2"></i>
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Step 3: Metode Layanan -->
                    <div id="step-3" class="form-step" style="display: none;">
                        <h5 class="step-title mb-4"><span class="step-number">3</span> Pilih Metode Layanan</h5>
                        <div class="row g-4">
                            <div class="col-lg-6">
                                <div class="service-method-card" data-method="antar-lokasi">
                                    <div class="method-icon">
                                        <i class="fas fa-map-marker-alt fa-3x text-primary"></i>
                                    </div>
                                    <h6 class="mt-3">Antar ke Lokasi Workshop</h6>
                                    <p class="text-muted">Anda mengantar barang ke workshop kami</p>
                                    <ul class="method-benefits">
                                        <li><i class="fas fa-check text-success me-2"></i>Hemat biaya transport</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Bisa konsultasi langsung</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Proses lebih cepat</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="service-method-card" data-method="antar-jemput">
                                    <div class="method-icon">
                                        <i class="fas fa-truck fa-3x text-success"></i>
                                    </div>
                                    <h6 class="mt-3">Layanan Antar & Jemput</h6>
                                    <p class="text-muted">Kurir Mebel Anggita Jaya yang menangani</p>
                                    <ul class="method-benefits">
                                        <li><i class="fas fa-check text-success me-2"></i>Lebih praktis</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Aman dan terpercaya</li>
                                        <li><i class="fas fa-check text-success me-2"></i>Door to door service</li>
                                    </ul>
                                    <div class="additional-cost mt-2">
                                        <small class="text-warning"><i class="fas fa-info-circle me-1"></i>Biaya tambahan transport berlaku</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-outline-secondary me-2" id="back-step-2">
                                <i class="fas fa-arrow-left me-2"></i>Kembali
                            </button>
                            <button type="button" class="btn btn-fill-out" id="next-step-3" disabled>
                                Lanjutkan <i class="fas fa-arrow-right ms-2"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Step 4: Estimasi Biaya -->
                    <div id="step-4" class="form-step" style="display: none;">
                        <h5 class="step-title mb-4"><span class="step-number">4</span> Estimasi Biaya Awal</h5>
                        <div class="cost-estimation-card">
                            <div class="estimation-header">
                                <h6>Estimasi Biaya Layanan</h6>
                                <p class="text-muted">*Estimasi awal, biaya final akan dikonfirmasi setelah inspeksi</p>
                            </div>
                            <div class="cost-breakdown">
                                <div class="cost-item">
                                    <span>Biaya Perbaikan/Pembuatan:</span>
                                    <span id="service-cost">Rp 0</span>
                                </div>
                                <div class="cost-item">
                                    <span>Biaya Material:</span>
                                    <span id="material-cost">Rp 0</span>
                                </div>
                                <div class="cost-item" id="transport-cost-item" style="display: none;">
                                    <span>Biaya Transport:</span>
                                    <span id="transport-cost">Rp 0</span>
                                </div>
                                <hr>
                                <div class="cost-item total-cost">
                                    <span><strong>Total Estimasi:</strong></span>
                                    <span><strong id="total-cost">Rp 0</strong></span>
                                </div>
                            </div>
                            <div class="cost-notes mt-3">
                                <small class="text-info">
                                    <i class="fas fa-info-circle me-1"></i>
                                    Estimasi ini bersifat sementara. Biaya final akan dikonfirmasi setelah inspeksi fisik barang.
                                </small>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-outline-secondary me-2" id="back-step-3">
                                <i class="fas fa-arrow-left me-2"></i>Kembali
                            </button>
                            <button type="button" class="btn btn-fill-out" id="next-step-4">
                                Lanjutkan <i class="fas fa-arrow-right ms-2"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Step 5: Konfirmasi dan Penjadwalan -->
                    <div id="step-5" class="form-step" style="display: none;">
                        <h5 class="step-title mb-4"><span class="step-number">5</span> Konfirmasi dan Penjadwalan</h5>
                        <div class="row g-4">
                            <div class="col-lg-6">
                                <div class="schedule-card">
                                    <h6>Pilih Tanggal & Waktu</h6>
                                    <div class="form-group mb-3">
                                        <label for="service_date" class="form-label">Tanggal Layanan <span class="text-danger">*</span></label>
                                        <input type="date" class="form-control" id="service_date" name="service_date" min="<?= date('Y-m-d', strtotime('+1 day')) ?>" required>
                                    </div>
                                    <div class="form-group mb-3">
                                        <label for="service_time" class="form-label">Waktu Layanan <span class="text-danger">*</span></label>
                                        <select class="form-control" id="service_time" name="service_time" required>
                                            <option value="">Pilih waktu</option>
                                            <option value="08:00-10:00">08:00 - 10:00 WIB</option>
                                            <option value="10:00-12:00">10:00 - 12:00 WIB</option>
                                            <option value="13:00-15:00">13:00 - 15:00 WIB</option>
                                            <option value="15:00-17:00">15:00 - 17:00 WIB</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="special_notes" class="form-label">Catatan Khusus</label>
                                        <textarea class="form-control" id="special_notes" name="special_notes" rows="3" placeholder="Catatan atau permintaan khusus..."></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="order-summary-card">
                                    <h6>Ringkasan Pesanan</h6>
                                    <div class="summary-item">
                                        <span>Jenis Layanan:</span>
                                        <span id="summary-service">-</span>
                                    </div>
                                    <div class="summary-item">
                                        <span>Metode Layanan:</span>
                                        <span id="summary-method">-</span>
                                    </div>
                                    <div class="summary-item">
                                        <span>Estimasi Biaya:</span>
                                        <span id="summary-cost">-</span>
                                    </div>
                                    <div class="summary-item">
                                        <span>Tanggal Layanan:</span>
                                        <span id="summary-date">-</span>
                                    </div>
                                    <div class="summary-item">
                                        <span>Waktu Layanan:</span>
                                        <span id="summary-time">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-outline-secondary me-2" id="back-step-4">
                                <i class="fas fa-arrow-left me-2"></i>Kembali
                            </button>
                            <button type="submit" class="btn btn-fill-out btn-lg px-5" id="submit-order">
                                <i class="fas fa-check me-2"></i>Konfirmasi Pesanan
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- Contact Info for Damage Reports -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="damage_contact_info">
                    <div class="text-center mb-4">
                        <h5 class="mb-3">Butuh Bantuan Segera?</h5>
                        <p class="text-muted">Hubungi customer service kami untuk konsultasi kerusakan furniture</p>
                    </div>
                    <div class="contact_methods text-center">
                        <a href="tel:+621234567890" class="btn btn-outline-primary btn-lg me-2 mb-3">
                            <i class="fas fa-phone me-2"></i>Telepon: (021) 1234-5678
                        </a>
                        <a href="https://wa.me/6281234567890" class="btn btn-outline-success btn-lg me-2 mb-3" target="_blank">
                            <i class="fab fa-whatsapp me-2"></i>WhatsApp
                        </a>
                        <a href="mailto:repair@furniture-store.com" class="btn btn-outline-info btn-lg mb-3">
                            <i class="fas fa-envelope me-2"></i>Email Support
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Enhanced Services Section Styles */
    .section {
        padding: 60px 0;
    }

    .small_pt {
        padding-top: 40px !important;
    }

    .small_pb {
        padding-bottom: 40px !important;
    }

    .bg_gray {
        background-color: #f8f9fa;
    }

    .bg_light_gray {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    }

    /* Icon Box Improvements */
    .icon_box {
        background: white;
        border-radius: 15px;
        padding: 40px 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        border: 1px solid #e9ecef;
    }

    .icon_box:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    }

    .icon_box .icon i {
        transition: all 0.3s ease;
    }

    .icon_box:hover .icon i {
        transform: scale(1.1);
    }

    /* About Section */
    .about_img img {
        border-radius: 20px;
        transition: transform 0.3s ease;
    }

    .about_img:hover img {
        transform: scale(1.02);
    }

    .pr_list li {
        padding: 8px 0;
        font-size: 16px;
        line-height: 1.6;
    }

    /* Damage Cards Enhanced */
    .damage_card {
        background: white;
        border-radius: 20px;
        padding: 40px 25px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        border: 1px solid #e9ecef;
        position: relative;
        overflow: hidden;
    }

    .damage_card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: linear-gradient(90deg, #007bff, #28a745, #17a2b8);
        transform: scaleX(0);
        transition: transform 0.3s ease;
    }

    .damage_card:hover::before {
        transform: scaleX(1);
    }

    .damage_card:hover {
        transform: translateY(-10px);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    }

    .damage_list {
        list-style: none;
        padding: 0;
        margin: 20px 0;
        text-align: left;
    }

    .damage_list li {
        padding: 8px 0;
        font-size: 14px;
        color: #666;
        transition: color 0.3s ease;
    }

    .damage_card:hover .damage_list li {
        color: #333;
    }

    .damage_time {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 10px 20px;
        border-radius: 25px;
        font-size: 13px;
        font-weight: 600;
        display: inline-block;
        margin-top: 15px;
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }

    /* Form Section Enhanced */
    .damage_report_section {
        background: white;
        border-radius: 25px;
        padding: 50px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        border: 1px solid #e9ecef;
        position: relative;
        overflow: hidden;
    }

    .damage_report_section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
    }

    .form-header h4 {
        color: #333;
        font-weight: 700;
        margin-bottom: 15px;
    }

    .form-control {
        border-radius: 10px;
        border: 2px solid #e9ecef;
        padding: 12px 15px;
        transition: all 0.3s ease;
        font-size: 14px;
    }

    .form-control:focus {
        border-color: #007bff;
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        transform: translateY(-2px);
    }

    .form-label {
        font-weight: 600;
        color: #333;
        margin-bottom: 8px;
    }

    .btn-fill-out {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        border-radius: 50px;
        padding: 15px 30px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 1px;
        transition: all 0.3s ease;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    }

    .btn-fill-out:hover {
        transform: translateY(-3px);
        box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
    }

    /* Contact Info Enhanced */
    .damage_contact_info {
        background: white;
        border-radius: 20px;
        padding: 40px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        border: 1px solid #e9ecef;
    }

    .contact_methods .btn {
        border-radius: 50px;
        padding: 12px 25px;
        margin: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
        border-width: 2px;
    }

    .contact_methods .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
    }

    /* New Form Styles */
    .form-step {
        padding: 20px 0;
    }

    .step-title {
        color: #333;
        font-weight: 700;
        border-bottom: 2px solid #e9ecef;
        padding-bottom: 15px;
        margin-bottom: 25px;
    }

    .step-number {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 50%;
        width: 35px;
        height: 35px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        font-weight: 600;
    }

    .service-card {
        background: white;
        border: 2px solid #e9ecef;
        border-radius: 15px;
        padding: 25px 15px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        height: 100%;
    }

    .service-card:hover {
        border-color: #007bff;
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 123, 255, 0.15);
    }

    .service-card.active {
        border-color: #007bff;
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        transform: translateY(-5px);
    }

    .service-method-card {
        background: white;
        border: 2px solid #e9ecef;
        border-radius: 15px;
        padding: 30px 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        height: 100%;
    }

    .service-method-card:hover {
        border-color: #28a745;
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(40, 167, 69, 0.15);
    }

    .service-method-card.active {
        border-color: #28a745;
        background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(40, 167, 69, 0.05) 100%);
        transform: translateY(-5px);
    }

    .method-benefits {
        list-style: none;
        padding: 0;
        margin: 15px 0;
        text-align: left;
    }

    .method-benefits li {
        padding: 5px 0;
        font-size: 14px;
    }

    .form-section-title {
        color: #667eea;
        font-weight: 600;
        border-bottom: 1px solid #e9ecef;
        padding-bottom: 8px;
        margin-bottom: 15px;
    }

    .cost-estimation-card,
    .schedule-card,
    .order-summary-card {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 25px;
        border: 1px solid #e9ecef;
    }

    .cost-breakdown .cost-item {
        display: flex;
        justify-content: space-between;
        padding: 10px 0;
        border-bottom: 1px solid #e9ecef;
    }

    .cost-breakdown .total-cost {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        margin: 15px -25px -25px -25px;
        padding: 20px 25px;
        border-radius: 0 0 15px 15px;
        border-bottom: none;
    }

    .summary-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid #e9ecef;
        font-size: 14px;
    }

    .summary-item:last-child {
        border-bottom: none;
    }

    /* Progress Indicator */
    .progress-indicator {
        display: flex;
        justify-content: center;
        margin-bottom: 40px;
    }

    .progress-step {
        display: flex;
        align-items: center;
        margin: 0 10px;
    }

    .progress-circle {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #e9ecef;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #6c757d;
        font-weight: 600;
        position: relative;
    }

    .progress-circle.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
    }

    .progress-circle.completed {
        background: #28a745;
        color: white;
    }

    .progress-line {
        width: 60px;
        height: 2px;
        background: #e9ecef;
        margin: 0 10px;
    }

    .progress-line.completed {
        background: #28a745;
    }

    /* Responsive Improvements */
    @media (max-width: 768px) {
        .damage_report_section {
            padding: 30px 20px;
        }

        .damage_card {
            margin-bottom: 30px;
            padding: 30px 20px;
        }

        .contact_methods .btn {
            display: block;
            margin: 10px auto;
            width: 90%;
        }

        .section {
            padding: 40px 0;
        }

        .icon_box {
            margin-bottom: 30px;
            padding: 30px 15px;
        }
    }

    @media (max-width: 576px) {
        .damage_report_section {
            padding: 20px 15px;
        }

        .heading_s1 h2 {
            font-size: 24px;
        }

        .heading_s1 p {
            font-size: 14px;
        }
    }
</style>

<script>
    $(document).ready(function() {
        let selectedService = '';
        let selectedMethod = '';
        let currentStep = 1;

        // Step 1: Service Selection
        $('.service-card').on('click', function() {
            $('.service-card').removeClass('active');
            $(this).addClass('active');
            selectedService = $(this).data('service');
            $('#selected_service').val(selectedService);
            $('#next-step-1').prop('disabled', false);
        });

        // Step Navigation
        $('#next-step-1').on('click', function() {
            showStep(2);
            updateFormFields();
        });

        $('#back-step-1').on('click', function() {
            showStep(1);
        });

        $('#next-step-2').on('click', function() {
            if (validateStep2()) {
                showStep(3);
            }
        });

        $('#back-step-2').on('click', function() {
            showStep(2);
        });

        $('#next-step-3').on('click', function() {
            showStep(4);
            calculateEstimation();
        });

        $('#back-step-3').on('click', function() {
            showStep(3);
        });

        $('#next-step-4').on('click', function() {
            showStep(5);
            updateOrderSummary();
        });

        $('#back-step-4').on('click', function() {
            showStep(4);
        });

        // Step 3: Method Selection
        $('.service-method-card').on('click', function() {
            $('.service-method-card').removeClass('active');
            $(this).addClass('active');
            selectedMethod = $(this).data('method');
            $('#next-step-3').prop('disabled', false);

            if (selectedMethod === 'antar-jemput') {
                $('#transport-cost-item').show();
            } else {
                $('#transport-cost-item').hide();
            }
        });

        // Form submission
        $('#submit-order').on('click', function(e) {
            e.preventDefault();
            if (validateStep5()) {
                submitServiceOrder();
            }
        });

        // File input feedback
        $('#damage_photos').on('change', function() {
            var fileCount = this.files.length;
            var label = $(this).next('small');
            if (fileCount > 0) {
                label.text(fileCount + ' file(s) dipilih (maksimal 5 foto, format: JPG, PNG)');
                label.removeClass('text-muted').addClass('text-success');
            } else {
                label.text('Upload foto kondisi saat ini (maksimal 5 foto, format: JPG, PNG)');
                label.removeClass('text-success').addClass('text-muted');
            }
        });

        // Phone number formatting
        $('#phone_number').on('input', function() {
            var value = $(this).val().replace(/\D/g, '');
            var formattedValue = value.replace(/(\d{4})(\d{4})(\d{4})/, '$1-$2-$3');
            if (value.length <= 12) {
                $(this).val(formattedValue);
            }
        });

        function showStep(step) {
            $('.form-step').hide();
            $('#step-' + step).show();
            currentStep = step;
        }

        function updateFormFields() {
            // Hide all dynamic fields first
            $('#vehicle-info, #chair-info, #bed-info, #foam-options').hide();

            // Show relevant fields based on selected service
            switch (selectedService) {
                case 'jok-motor':
                case 'jok-mobil':
                    $('#vehicle-info').show();
                    $('#foam-options').show();
                    break;
                case 'kursi-rumah':
                    $('#chair-info').show();
                    $('#foam-options').show();
                    break;
                case 'spring-bed':
                    $('#bed-info').show();
                    break;
            }
        }

        function validateStep2() {
            const requiredFields = ['customer_name', 'phone_number', 'address', 'damage_description'];
            let isValid = true;

            // Add service-specific required fields
            switch (selectedService) {
                case 'jok-motor':
                case 'jok-mobil':
                    requiredFields.push('vehicle_brand');
                    break;
                case 'kursi-rumah':
                    requiredFields.push('chair_type');
                    break;
                case 'spring-bed':
                    requiredFields.push('bed_size');
                    break;
            }

            requiredFields.forEach(function(field) {
                const input = $('#' + field);
                if (!input.val().trim()) {
                    input.addClass('is-invalid');
                    isValid = false;
                } else {
                    input.removeClass('is-invalid');
                }
            });

            if (!isValid) {
                Swal.fire({
                    icon: 'warning',
                    title: 'Form Tidak Lengkap',
                    text: 'Mohon lengkapi semua field yang wajib diisi.',
                    confirmButtonText: 'OK'
                });
            }

            return isValid;
        }

        function validateStep5() {
            const requiredFields = ['service_date', 'service_time'];
            let isValid = true;

            requiredFields.forEach(function(field) {
                const input = $('#' + field);
                if (!input.val().trim()) {
                    input.addClass('is-invalid');
                    isValid = false;
                } else {
                    input.removeClass('is-invalid');
                }
            });

            if (!isValid) {
                Swal.fire({
                    icon: 'warning',
                    title: 'Form Tidak Lengkap',
                    text: 'Mohon pilih tanggal dan waktu layanan.',
                    confirmButtonText: 'OK'
                });
            }

            return isValid;
        }

        function calculateEstimation() {
            let serviceCost = 0;
            let materialCost = 0;
            let transportCost = 0;

            // Base service cost
            switch (selectedService) {
                case 'jok-motor':
                    serviceCost = 150000;
                    break;
                case 'jok-mobil':
                    serviceCost = 500000;
                    break;
                case 'kursi-rumah':
                    serviceCost = 300000;
                    break;
                case 'spring-bed':
                    serviceCost = 800000;
                    break;
            }

            // Material cost based on selection
            const material = $('#material_type').val();
            switch (material) {
                case 'kulit-asli':
                    materialCost = 200000;
                    break;
                case 'kulit-sintetis':
                    materialCost = 100000;
                    break;
                case 'kain-oscar':
                    materialCost = 75000;
                    break;
                case 'kain-bludru':
                    materialCost = 125000;
                    break;
                default:
                    materialCost = 50000;
            }

            // Transport cost
            if (selectedMethod === 'antar-jemput') {
                transportCost = 50000;
            }

            const totalCost = serviceCost + materialCost + transportCost;

            // Update cost display
            $('#service-cost').text('Rp ' + serviceCost.toLocaleString());
            $('#material-cost').text('Rp ' + materialCost.toLocaleString());
            $('#transport-cost').text('Rp ' + transportCost.toLocaleString());
            $('#total-cost').text('Rp ' + totalCost.toLocaleString());
        }

        function updateOrderSummary() {
            const serviceNames = {
                'jok-motor': 'Perbaikan Jok Motor',
                'jok-mobil': 'Perbaikan Jok Mobil',
                'kursi-rumah': 'Perbaikan Kursi Rumah Tangga',
                'spring-bed': 'Perbaikan/Pemesanan Spring Bed'
            };

            const methodNames = {
                'antar-lokasi': 'Antar ke Lokasi Workshop',
                'antar-jemput': 'Layanan Antar & Jemput'
            };

            $('#summary-service').text(serviceNames[selectedService] || '-');
            $('#summary-method').text(methodNames[selectedMethod] || '-');
            $('#summary-cost').text($('#total-cost').text());
            $('#summary-date').text($('#service_date').val() || '-');
            $('#summary-time').text($('#service_time').val() || '-');
        }

        function submitServiceOrder() {

            const formData = new FormData();

            // Collect all form data
            formData.append('selected_service', selectedService);
            formData.append('selected_method', selectedMethod);
            formData.append('customer_name', $('#customer_name').val());
            formData.append('phone_number', $('#phone_number').val());
            formData.append('address', $('#address').val());
            formData.append('damage_description', $('#damage_description').val());
            formData.append('material_type', $('#material_type').val());
            formData.append('foam_modification', $('#foam_modification').val());
            formData.append('shape_modification', $('#shape_modification').val());
            formData.append('service_date', $('#service_date').val());
            formData.append('service_time', $('#service_time').val());
            formData.append('special_notes', $('#special_notes').val());
            formData.append('estimated_cost', $('#total-cost').text());

            // Add service-specific data
            switch (selectedService) {
                case 'jok-motor':
                case 'jok-mobil':
                    formData.append('vehicle_brand', $('#vehicle_brand').val());
                    break;
                case 'kursi-rumah':
                    formData.append('chair_type', $('#chair_type').val());
                    break;
                case 'spring-bed':
                    formData.append('bed_size', $('#bed_size').val());
                    break;
            }

            // Add photos
            const photos = $('#damage_photos')[0].files;
            for (let i = 0; i < photos.length; i++) {
                formData.append('damage_photos[]', photos[i]);
            }
            console.log("Submitting form data:", formData);

            $.ajax({
                url: site_url + "/Home/submit_service_order",
                type: 'POST',
                data: formData,
                dataType: 'json',
                contentType: false,
                processData: false,
                beforeSend: function() {
                    $('#submit-order').prop('disabled', true).html('<i class="fas fa-spinner fa-spin me-2"></i>Memproses...');
                },
                success: function(response) {
                    console.log("Response received:", response);

                    if (response.status === 'success') {
                        Swal.fire({
                            icon: 'success',
                            title: 'Berhasil!',
                            html: `
                                <div style="text-align: left;">
                                    <p><strong>Pesanan layanan berhasil dikirim!</strong></p>
                                    <p>Order ID: <strong style="color: #667eea;">${response.order_id}</strong></p>
                                    <p>Tim kami akan menghubungi Anda dalam 1x24 jam.</p>
                                    <hr>
                                    <div style="margin-top: 15px; text-align: center;">
                                        <a href="<?= base_url('track/') ?>${response.order_id}" 
                                           target="_blank" 
                                           style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px 20px; text-decoration: none; border-radius: 25px; font-weight: 600;">
                                            <i class="fas fa-search-location"></i> Lacak Pesanan
                                        </a>
                                    </div>
                                </div>
                            `,
                            confirmButtonColor: '#667eea',
                            allowOutsideClick: false
                        }).then(() => {
                            // Reset form
                            resetForm();
                            goToStep(1);
                        });
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Gagal!',
                            text: response.message || 'Terjadi kesalahan saat memproses pesanan.',
                            confirmButtonColor: '#667eea'
                        });
                    }

                    $('#submit-order').prop('disabled', false).html('<i class="fas fa-paper-plane me-2"></i>Kirim Pesanan');
                },
                error: function(xhr, status, error) {
                    console.log("AJAX Error:", error);
                    console.log("Response Text:", xhr.responseText);

                    Swal.fire({
                        icon: 'error',
                        title: 'Error!',
                        text: 'Terjadi kesalahan koneksi. Silakan coba lagi.',
                        confirmButtonColor: '#667eea'
                    });

                    $('#submit-order').prop('disabled', false).html('<i class="fas fa-paper-plane me-2"></i>Kirim Pesanan');
                }
            });
        }
    });
</script>